<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Producto — Blacksheep by CAVS</title>
  <meta name="description" content="Detalle de producto Blacksheep by CAVS." />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>

<header class="nav">
  <div class="container nav-inner">
    <a class="brand" href="index.html">
      <span>by CAVS</span><span class="dot">•</span>
    </a>

    <nav class="nav-links">
      <a href="index.html">Inicio</a>
      <a href="blacksheep.html">Blacksheep</a>
      <a href="black-ivory.html">Black Ivory</a>
      <a href="about.html">Sobre CAVS</a>
      <a href="contact.html">Contacto</a>
    </nav>

    <a class="cta"
       href="https://wa.me/56973765456"
       target="_blank" rel="noopener">
      Contactar
    </a>
  </div>
</header>

<main>

  <!-- =========================
       HERO PRODUCTO
       ========================= -->
  <section class="section">
    <div class="container">

      <div class="card pad brand-hero">

        <div class="kicker" id="product-code">Producto</div>

        <h1 class="h1" id="product-name">Cargando…</h1>

        <p class="lead" id="product-desc"></p>

        <div class="pills" id="product-tags"></div>

        <div class="actions" id="product-actions"></div>

      </div>

    </div>
  </section>

  <!-- =========================
       GALERÍA
       ========================= -->
  <section class="section small">
    <div class="container">

      <div class="hscroll" id="product-gallery">
        <!-- imágenes dinámicas -->
      </div>

      <div class="hscroll-hint">
        Desliza para ver más imágenes →
      </div>

    </div>
  </section>

  <!-- =========================
       FICHA TÉCNICA
       ========================= -->
  <section class="section">
    <div class="container">

      <h2 class="h2">Ficha técnica</h2>

      <div class="grid-2" id="product-specs">
        <!-- specs dinámicos -->
      </div>

    </div>
  </section>

</main>

<footer class="footer">
  <div class="container">
    <div class="row">
      <div>© <span id="year"></span> by CAVS — Cristóbal Aboitiz</div>
      <div class="small-muted">
        <a href="blacksheep.html">Volver a Blacksheep</a>
      </div>
    </div>
  </div>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();
</script>

<!-- =========================
     SCRIPT PRODUCTO
     ========================= -->
<script>
const params = new URLSearchParams(window.location.search);
const code = params.get("code");

fetch("assets/data/products.json")
  .then(res => res.json())
  .then(products => {

    const product = products.find(p => p.code === code);

    if (!product) {
      document.body.innerHTML = "<p style='padding:40px'>Producto no encontrado.</p>";
      return;
    }

    // ---- HERO ----
    document.title = product.name + " — Blacksheep by CAVS";
    document.getElementById("product-code").textContent = product.code;
    document.getElementById("product-name").textContent = product.name;
    document.getElementById("product-desc").textContent = product.description;

    // Tags
    const tags = document.getElementById("product-tags");
    product.tags.forEach(t => {
      const span = document.createElement("span");
      span.className = "pill";
      span.textContent = t;
      tags.appendChild(span);
    });

    // Acciones
    const actions = document.getElementById("product-actions");

    if (product.status === "available") {
      actions.innerHTML = `
        <a class="btn primary"
           href="https://wa.me/56973765456?text=Hola!%20Estoy%20interesado%20en%20la%20tabla%20${product.code}."
           target="_blank">
          Comprar / Consultar
        </a>
        <span class="pill">Precio: $${product.price.toLocaleString("es-CL")}</span>
      `;
    } else {
      actions.innerHTML = `
        <span class="pill">Vendida</span>
        <a class="btn"
           href="https://wa.me/56973765456?text=Hola!%20Me%20gustaría%20encargar%20una%20tabla%20similar%20a%20${product.code}."
           target="_blank">
          Encargar similar
        </a>
      `;
    }

    // ---- GALERÍA ----
    const gallery = document.getElementById("product-gallery");

    product.images.forEach(img => {
      const div = document.createElement("div");
      div.className = "shot";
      div.innerHTML = `
        <img src="assets/img/tablas/${img}"
             alt="${product.name}">
      `;
      gallery.appendChild(div);
    });

    // ---- FICHA ----
    const specs = document.getElementById("product-specs");

    Object.entries(product.specs).forEach(([key, value]) => {
      const card = document.createElement("div");
      card.className = "card pad";
      card.innerHTML = `
        <div class="kicker">${key}</div>
        <p class="p">${value}</p>
      `;
      specs.appendChild(card);
    });

  })
  .catch(err => {
    console.error("Error cargando producto:", err);
  });
</script>

</body>
</html>
